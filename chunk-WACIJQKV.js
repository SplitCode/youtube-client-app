import{a as R}from"./chunk-RVHI5NZO.js";import{b as j}from"./chunk-6FSU2UED.js";import{a as k,b as E,c as s,d as F,e as I,h as M,j as q,l as O,m as N,n as w,p as V,r as D}from"./chunk-MGHJKIUS.js";import{m as L,v as G}from"./chunk-PXWKRQ4T.js";import{j as T,n as A}from"./chunk-BFO4FPQV.js";import{l as x,m as P,q as S}from"./chunk-BZJH6ZOK.js";import{Aa as v,Ba as C,Bb as m,Ib as y,Ua as l,jb as d,ka as c,lb as a,nb as r,ob as n,pb as _,qa as b,sb as h,vb as f,wb as g}from"./chunk-WCZLKJAP.js";function U(e,o){e&1&&(r(0,"div"),m(1,"Please enter a title."),n())}function $(e,o){e&1&&(r(0,"div"),m(1,"The title is too short."),n())}function z(e,o){e&1&&(r(0,"div"),m(1,"The title is too long."),n())}function H(e,o){if(e&1&&(r(0,"div",22),d(1,U,2,0,"div",23)(2,$,2,0,"div",23)(3,z,2,0,"div",23),n()),e&2){let t=g();l(),a("ngIf",t.title==null||t.title.errors==null?null:t.title.errors.required),l(),a("ngIf",t.title==null||t.title.errors==null?null:t.title.errors.minlength),l(),a("ngIf",t.title==null||t.title.errors==null?null:t.title.errors.maxlength)}}function J(e,o){e&1&&(r(0,"div"),m(1," The description is too long. "),n())}function K(e,o){if(e&1&&(r(0,"div",22),d(1,J,2,0,"div",23),n()),e&2){let t=g();l(),a("ngIf",t.description==null||t.description.errors==null?null:t.description.errors.maxlength)}}function Q(e,o){e&1&&(r(0,"div"),m(1," Please enter a link to the image. "),n())}function W(e,o){if(e&1&&(r(0,"div",22),d(1,Q,2,0,"div",23),n()),e&2){let t=g();l(),a("ngIf",t.img==null||t.img.errors==null?null:t.img.errors.required)}}function X(e,o){e&1&&(r(0,"div"),m(1," Please enter a link to the video. "),n())}function Y(e,o){if(e&1&&(r(0,"div",22),d(1,X,2,0,"div",23),n()),e&2){let t=g();l(),a("ngIf",t.link==null||t.link.errors==null?null:t.link.errors.required)}}function Z(e,o){e&1&&(r(0,"div"),m(1," Please enter a creation date. "),n())}function ee(e,o){e&1&&(r(0,"div"),m(1,"The date is invalid."),n())}function te(e,o){if(e&1&&(r(0,"div",22),d(1,Z,2,0,"div",23)(2,ee,2,0,"div",23),n()),e&2){let t=g();l(),a("ngIf",t.date==null||t.date.errors==null?null:t.date.errors.required),l(),a("ngIf",t.date==null||t.date.errors==null?null:t.date.errors.errorDate)}}function ie(e,o){e&1&&(r(0,"div"),m(1,"Please enter a tag."),n())}function ne(e,o){if(e&1&&(r(0,"div",22),d(1,ie,2,0,"div",23),n()),e&2){let t=g().$implicit;l(),a("ngIf",t.errors==null?null:t.errors.required)}}function re(e,o){if(e&1){let t=h();r(0,"app-button",26),f("click",function(){v(t);let u=g().index,i=g();return C(i.removeTag(u))}),m(1,"Remove"),n()}}function oe(e,o){if(e&1&&(r(0,"div",3)(1,"label",24),m(2,"Tag"),n(),_(3,"input",25),d(4,ne,2,1,"div",6),r(5,"div",17),d(6,re,2,0,"app-button",18),n()()),e&2){let t=o.$implicit,p=o.index,u=g();l(3),a("formControlName",p),l(),a("ngIf",t.invalid&&(t.dirty||t.touched)),l(2),a("ngIf",u.tags.length>1)}}function le(e,o){if(e&1){let t=h();r(0,"app-button",26),f("click",function(){v(t);let u=g();return C(u.addTag())}),m(1,"Add tag"),n()}}var ye=(()=>{let o=class o{constructor(){this.authService=c(k),this.logger=c(R),this.store=c(L),this.router=c(T),this.fb=c(V),this.adminForm=this.fb.group({title:["",[s.required,s.minLength(3),s.maxLength(20)]],description:["",[s.maxLength(255)]],img:["",[s.required]],link:["",[s.required]],date:["",[s.required,j]],tags:this.fb.array([this.fb.control("",s.required)])})}get title(){return this.adminForm.get("title")}get description(){return this.adminForm.get("description")}get img(){return this.adminForm.get("img")}get link(){return this.adminForm.get("link")}get date(){return this.adminForm.get("date")}get tags(){return this.adminForm.get("tags")}createCard(){if(this.adminForm.valid){let p=this.adminForm.value,u={id:this.generateUniqueId(),title:p.title,description:p.description,imgLink:p.img,videoLink:p.link,date:p.date,isCustom:!0};this.logger.logMessage("Card created"),this.store.dispatch(G({card:u})),this.router.navigate(["/main"])}}generateUniqueId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}addTag(){this.tags.length<5&&this.tags.push(new M("",[s.required]))}removeTag(p){this.tags.length>1&&this.tags.removeAt(p)}resetForm(){for(this.adminForm.reset();this.tags.length>1;)this.tags.removeAt(1)}};o.\u0275fac=function(u){return new(u||o)},o.\u0275cmp=b({type:o,selectors:[["app-admin-page"]],standalone:!0,features:[y],decls:38,vars:11,consts:[[1,"admin-page__form"],[1,"admin-page__form-title"],[1,"form",3,"ngSubmit","formGroup"],[1,"form__group"],["for","title",1,"required"],["type","text","id","title","formControlName","title","name","title"],["class","form__error",4,"ngIf"],["for","description"],["type","text","id","description","formControlName","description","name","description"],["for","img",1,"required"],["type","text","id","img","formControlName","img","name","img"],["for","link",1,"required"],["type","text","id","link","formControlName","link","name","link"],["for","date",1,"required"],["type","date","id","date","formControlName","date","name","date"],["formArrayName","tags"],["class","form__group",4,"ngFor","ngForOf"],[1,"form__button"],["btnAppearance","middle",3,"click",4,"ngIf"],[1,"form__buttons"],["btnAppearance","large",3,"click","btnType"],["btnAppearance","large",3,"btnType","disabled"],[1,"form__error"],[4,"ngIf"],["for","tag",1,"required"],["type","text","id","tag",3,"formControlName"],["btnAppearance","middle",3,"click"]],template:function(u,i){u&1&&(r(0,"div",0)(1,"h2",1),m(2,"Create new card"),n(),r(3,"form",2),f("ngSubmit",function(){return i.createCard()}),r(4,"div",3)(5,"label",4),m(6,"Title"),n(),_(7,"input",5),d(8,H,4,3,"div",6),n(),r(9,"div",3)(10,"label",7),m(11,"Description"),n(),_(12,"input",8),d(13,K,2,1,"div",6),n(),r(14,"div",3)(15,"label",9),m(16,"Img"),n(),_(17,"input",10),d(18,W,2,1,"div",6),n(),r(19,"div",3)(20,"label",11),m(21,"Link Video"),n(),_(22,"input",12),d(23,Y,2,1,"div",6),n(),r(24,"div",3)(25,"label",13),m(26,"Creation Date"),n(),_(27,"input",14),d(28,te,3,2,"div",6),n(),r(29,"div",15),d(30,oe,7,3,"div",16),r(31,"div",17),d(32,le,2,0,"app-button",18),n()(),r(33,"div",19)(34,"app-button",20),f("click",function(){return i.resetForm()}),m(35," Reset "),n(),r(36,"app-button",21),m(37," Create card "),n()()()()),u&2&&(l(3),a("formGroup",i.adminForm),l(5),a("ngIf",(i.title==null?null:i.title.invalid)&&((i.title==null?null:i.title.dirty)||(i.title==null?null:i.title.touched))),l(5),a("ngIf",(i.description==null?null:i.description.invalid)&&((i.description==null?null:i.description.dirty)||(i.description==null?null:i.description.touched))),l(5),a("ngIf",(i.img==null?null:i.img.invalid)&&((i.img==null?null:i.img.dirty)||(i.img==null?null:i.img.touched))),l(5),a("ngIf",(i.link==null?null:i.link.invalid)&&((i.link==null?null:i.link.dirty)||(i.link==null?null:i.link.touched))),l(5),a("ngIf",(i.date==null?null:i.date.invalid)&&((i.date==null?null:i.date.dirty)||(i.date==null?null:i.date.touched))),l(2),a("ngForOf",i.tags.controls),l(2),a("ngIf",i.tags.length<5),l(2),a("btnType","button"),l(2),a("btnType","submit")("disabled",i.adminForm.invalid))},dependencies:[D,q,E,F,I,O,w,N,S,x,P,A],styles:['.admin-page__form[_ngcontent-%COMP%]{max-width:43.5rem;margin:4rem auto;padding:2.8rem 2.5rem;border-radius:.5rem;background-color:var(--form-color)}.admin-page__form-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem;margin-bottom:2.7rem}.form__group[_ngcontent-%COMP%]{margin-bottom:.5rem}.form__group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.4rem;margin-top:1.5rem;color:var(--light-text-color)}.form__group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:1.3rem .9rem;border:none;background-color:var(--dark-input-bg)}.form__group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline-color:var(--accent-color)}.form__group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:.1rem solid var(--error-text-color);border-radius:.5rem}.form__group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *"}.form__button[_ngcontent-%COMP%]{margin-top:1.5rem}.form__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:3rem}.form__error[_ngcontent-%COMP%]{color:var(--error-text-color);margin:.5rem}']});let e=o;return e})();export{ye as AdminPageComponent};
