import{a as L}from"./chunk-WVA2DHQZ.js";import{b as R}from"./chunk-6FSU2UED.js";import{a as E,b as F,c as g,d as I,e as w,f as M,h as _,j as O,l as q,m as N,n as V,p as D,r as G}from"./chunk-KF7YFY64.js";import{j as A,n as k}from"./chunk-GNBJRYWW.js";import{l as P,m as S,q as T}from"./chunk-64OOHNVT.js";import{$a as b,Ca as l,Sa as d,Ua as a,Wa as r,Xa as i,Y as v,Ya as s,aa as y,cb as f,db as p,ib as m,ja as C,ka as h,pb as x}from"./chunk-L5TMY7ZW.js";function $(e,o){e&1&&(r(0,"div"),m(1,"Please enter a title."),i())}function z(e,o){e&1&&(r(0,"div"),m(1,"The title is too short."),i())}function B(e,o){e&1&&(r(0,"div"),m(1,"The title is too long."),i())}function H(e,o){if(e&1&&(r(0,"div",22),d(1,$,2,0,"div",23)(2,z,2,0,"div",23)(3,B,2,0,"div",23),i()),e&2){let t=p();l(),a("ngIf",t.title==null||t.title.errors==null?null:t.title.errors.required),l(),a("ngIf",t.title==null||t.title.errors==null?null:t.title.errors.minlength),l(),a("ngIf",t.title==null||t.title.errors==null?null:t.title.errors.maxlength)}}function J(e,o){e&1&&(r(0,"div"),m(1," The description is too long. "),i())}function K(e,o){if(e&1&&(r(0,"div",22),d(1,J,2,0,"div",23),i()),e&2){let t=p();l(),a("ngIf",t.description==null||t.description.errors==null?null:t.description.errors.maxlength)}}function Q(e,o){e&1&&(r(0,"div"),m(1," Please enter a link to the image. "),i())}function U(e,o){if(e&1&&(r(0,"div",22),d(1,Q,2,0,"div",23),i()),e&2){let t=p();l(),a("ngIf",t.img==null||t.img.errors==null?null:t.img.errors.required)}}function W(e,o){e&1&&(r(0,"div"),m(1," Please enter a link to the video. "),i())}function X(e,o){if(e&1&&(r(0,"div",22),d(1,W,2,0,"div",23),i()),e&2){let t=p();l(),a("ngIf",t.link==null||t.link.errors==null?null:t.link.errors.required)}}function Y(e,o){e&1&&(r(0,"div"),m(1," Please enter a creation date. "),i())}function Z(e,o){e&1&&(r(0,"div"),m(1,"The date is invalid."),i())}function ee(e,o){if(e&1&&(r(0,"div",22),d(1,Y,2,0,"div",23)(2,Z,2,0,"div",23),i()),e&2){let t=p();l(),a("ngIf",t.date==null||t.date.errors==null?null:t.date.errors.required),l(),a("ngIf",t.date==null||t.date.errors==null?null:t.date.errors.errorDate)}}function te(e,o){e&1&&(r(0,"div"),m(1,"Please enter a tag."),i())}function ne(e,o){if(e&1&&(r(0,"div",22),d(1,te,2,0,"div",23),i()),e&2){let t=p().$implicit;l(),a("ngIf",t.errors==null?null:t.errors.required)}}function ie(e,o){if(e&1){let t=b();r(0,"app-button",26),f("click",function(){C(t);let u=p().index,n=p();return h(n.removeTag(u))}),m(1,"Remove"),i()}}function re(e,o){if(e&1&&(r(0,"div",3)(1,"label",24),m(2,"Tag"),i(),s(3,"input",25),d(4,ne,2,1,"div",6),r(5,"div",17),d(6,ie,2,0,"app-button",18),i()()),e&2){let t=o.$implicit,c=o.index,u=p();l(3),a("formControlName",c),l(),a("ngIf",t.invalid&&(t.dirty||t.touched)),l(2),a("ngIf",u.tags.length>1)}}function oe(e,o){if(e&1){let t=b();r(0,"app-button",26),f("click",function(){C(t);let u=p();return h(u.addTag())}),m(1,"Add tag"),i()}}var Ce=(()=>{let o=class o{constructor(){this.adminForm=new M({title:new _("",[g.required,g.minLength(3),g.maxLength(20)]),description:new _("",[g.maxLength(255)]),img:new _("",[g.required]),link:new _("",[g.required]),date:new _("",[g.required,R]),tags:new D([new _("",g.required)])}),this.authService=v(E),this.logger=v(L),this.router=v(A)}get title(){return this.adminForm.get("title")}get description(){return this.adminForm.get("description")}get img(){return this.adminForm.get("img")}get link(){return this.adminForm.get("link")}get date(){return this.adminForm.get("date")}get tags(){return this.adminForm.get("tags")}onSubmit(){this.adminForm.valid&&(this.logger.logMessage("Card created"),this.router.navigate(["/main"]))}addTag(){this.tags.length<5&&this.tags.push(new _("",[g.required]))}removeTag(c){this.tags.length>1&&this.tags.removeAt(c)}resetForm(){for(this.adminForm.reset();this.tags.length>1;)this.tags.removeAt(1)}};o.\u0275fac=function(u){return new(u||o)},o.\u0275cmp=y({type:o,selectors:[["app-admin-page"]],standalone:!0,features:[x],decls:38,vars:11,consts:[[1,"admin-page__form"],[1,"admin-page__form-title"],[1,"form",3,"ngSubmit","formGroup"],[1,"form__group"],["for","title",1,"required"],["type","text","id","title","formControlName","title","name","title"],["class","form__error",4,"ngIf"],["for","description"],["type","text","id","description","formControlName","description","name","description"],["for","img",1,"required"],["type","text","id","img","formControlName","img","name","img"],["for","link",1,"required"],["type","text","id","link","formControlName","link","name","link"],["for","date",1,"required"],["type","date","id","date","formControlName","date","name","date"],["formArrayName","tags"],["class","form__group",4,"ngFor","ngForOf"],[1,"form__button"],["btnAppearance","middle",3,"click",4,"ngIf"],[1,"form__buttons"],["btnAppearance","large",3,"click","btnType"],["btnAppearance","large",3,"btnType","disabled"],[1,"form__error"],[4,"ngIf"],["for","tag",1,"required"],["type","text","id","tag",3,"formControlName"],["btnAppearance","middle",3,"click"]],template:function(u,n){u&1&&(r(0,"div",0)(1,"h2",1),m(2,"Create new card"),i(),r(3,"form",2),f("ngSubmit",function(){return n.onSubmit()}),r(4,"div",3)(5,"label",4),m(6,"Title"),i(),s(7,"input",5),d(8,H,4,3,"div",6),i(),r(9,"div",3)(10,"label",7),m(11,"Description"),i(),s(12,"input",8),d(13,K,2,1,"div",6),i(),r(14,"div",3)(15,"label",9),m(16,"Img"),i(),s(17,"input",10),d(18,U,2,1,"div",6),i(),r(19,"div",3)(20,"label",11),m(21,"Link Video"),i(),s(22,"input",12),d(23,X,2,1,"div",6),i(),r(24,"div",3)(25,"label",13),m(26,"Creation Date"),i(),s(27,"input",14),d(28,ee,3,2,"div",6),i(),r(29,"div",15),d(30,re,7,3,"div",16),r(31,"div",17),d(32,oe,2,0,"app-button",18),i()(),r(33,"div",19)(34,"app-button",20),f("click",function(){return n.resetForm()}),m(35," Reset "),i(),r(36,"app-button",21),m(37," Create card "),i()()()()),u&2&&(l(3),a("formGroup",n.adminForm),l(5),a("ngIf",(n.title==null?null:n.title.invalid)&&((n.title==null?null:n.title.dirty)||(n.title==null?null:n.title.touched))),l(5),a("ngIf",(n.description==null?null:n.description.invalid)&&((n.description==null?null:n.description.dirty)||(n.description==null?null:n.description.touched))),l(5),a("ngIf",(n.img==null?null:n.img.invalid)&&((n.img==null?null:n.img.dirty)||(n.img==null?null:n.img.touched))),l(5),a("ngIf",(n.link==null?null:n.link.invalid)&&((n.link==null?null:n.link.dirty)||(n.link==null?null:n.link.touched))),l(5),a("ngIf",(n.date==null?null:n.date.invalid)&&((n.date==null?null:n.date.dirty)||(n.date==null?null:n.date.touched))),l(2),a("ngForOf",n.tags.controls),l(2),a("ngIf",n.tags.length<5),l(2),a("btnType","button"),l(2),a("btnType","submit")("disabled",n.adminForm.invalid))},dependencies:[G,O,F,I,w,q,V,N,T,P,S,k],styles:['.admin-page__form[_ngcontent-%COMP%]{max-width:43.5rem;margin:4rem auto;padding:2.8rem 2.5rem;border-radius:.5rem;background-color:var(--form-color)}.admin-page__form-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem;margin-bottom:2.7rem}.form__group[_ngcontent-%COMP%]{margin-bottom:.5rem}.form__group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.4rem;margin-top:1.5rem;color:var(--light-text-color)}.form__group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:1.3rem .9rem;border:none;background-color:var(--dark-input-bg)}.form__group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline-color:var(--accent-color)}.form__group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:.1rem solid var(--error-text-color);border-radius:.5rem}.form__group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *"}.form__button[_ngcontent-%COMP%]{margin-top:1.5rem}.form__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:3rem}.form__error[_ngcontent-%COMP%]{color:var(--error-text-color);margin:.5rem}']});let e=o;return e})();export{Ce as AdminPageComponent};
